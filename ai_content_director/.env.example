# AI Content Director - ENV example (Foundation Stack)
# Copy to .env and fill values. KHONG commit .env (chua secrets).

# --- Secrets: khong dat gia that vao git ---
# DATABASE_URL, OPENAI_API_KEY, FACEBOOK_* phai duoc set qua .env hoac env.
# Trong Docker: env_file: ai_content_director/.env hoac environment trong compose.

APP_ENV=local
DATABASE_URL=postgresql+asyncpg://postgres:postgres@localhost:5432/ai_content_director
LOG_LEVEL=INFO

# OpenAI (required for AI planner/content; if missing, endpoints fall back to template)
OPENAI_API_KEY=
OPENAI_MODEL=gpt-4o-mini
OPENAI_TIMEOUT_SECONDS=45
OPENAI_MAX_RETRIES=2
OPENAI_TEMPERATURE=0.7

# Cost guard: daily budget USD per tenant. Vượt → fallback template, không gọi OpenAI.
DAILY_BUDGET_USD=2.0
# Optional: giá USD / 1M tokens (input, output). Không set thì dùng giá mặc định gpt-4o-mini.
# OPENAI_INPUT_PRICE_PER_1M=0.15
# OPENAI_OUTPUT_PRICE_PER_1M=0.60

# Rate limit: requests per minute per tenant (header X-Tenant-ID) hoặc per API key (header X-API-Key).
# REDIS_URL bắt buộc để bật rate limit; không set thì không áp dụng limit.
RATE_LIMIT_PER_MIN=60
REDIS_URL=

FACEBOOK_PAGE_ID=
FACEBOOK_ACCESS_TOKEN=

# --- Google Drive Dropzone (content_assets + media-required publish) ---
GDRIVE_SA_KEY_PATH=
GDRIVE_READY_FOLDER_ID=
GDRIVE_PROCESSED_FOLDER_ID=
GDRIVE_REJECTED_FOLDER_ID=
LOCAL_MEDIA_DIR=/opt/aiplatform/media_cache
ASSET_MAX_SIZE_MB=50
ASSET_ALLOWED_MIME_IMAGE=image/jpeg,image/png,image/webp
ASSET_ALLOWED_MIME_VIDEO=video/mp4,video/quicktime

# --- Scheduler auto-publish (HITL + approved items) ---
SCHEDULER_ENABLED=true
SCHEDULER_INTERVAL_SECONDS=60
# Chạy theo 1 tenant (optional): set UUID để chỉ quét tenant đó
# SCHEDULER_TENANT_ID=
PUBLISH_MAX_RETRIES=3

# --- Huong dan secrets ---
# - DATABASE_URL: chi chua password trong .env, khong push len repo.
# - OPENAI_API_KEY, FACEBOOK_ACCESS_TOKEN: tuyet doi khong commit.
# - Prod: dung secret manager (AWS Secrets Manager, Vault, ...) hoac env inject khi chay.
