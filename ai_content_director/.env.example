# AI Content Director - ENV example (Foundation Stack)
# Copy to .env and fill values. KHONG commit .env (chua secrets).

# --- Secrets: khong dat gia that vao git ---
# DATABASE_URL, OPENAI_API_KEY, FACEBOOK_* phai duoc set qua .env hoac env.
# Trong Docker: env_file: ai_content_director/.env hoac environment trong compose.

APP_ENV=local
DATABASE_URL=postgresql+asyncpg://postgres:postgres@localhost:5432/ai_content_director
LOG_LEVEL=INFO

# OpenAI (required for AI planner/content; if missing, endpoints fall back to template)
OPENAI_API_KEY=
OPENAI_MODEL=gpt-4o-mini
OPENAI_VISION_MODEL=gpt-4o-mini
OPENAI_TIMEOUT_SECONDS=45
OPENAI_MAX_RETRIES=2
OPENAI_TEMPERATURE=0.7

# Cost guard: daily budget USD per tenant. Vượt → fallback template, không gọi OpenAI.
DAILY_BUDGET_USD=2.0
# Optional: giá USD / 1M tokens (input, output). Không set thì dùng giá mặc định gpt-4o-mini.
# OPENAI_INPUT_PRICE_PER_1M=0.15
# OPENAI_OUTPUT_PRICE_PER_1M=0.60

# Rate limit: requests per minute per tenant (header X-Tenant-ID) hoặc per API key (header X-API-Key).
# REDIS_URL bắt buộc để bật rate limit; không set thì không áp dụng limit.
RATE_LIMIT_PER_MIN=60
REDIS_URL=

FACEBOOK_PAGE_ID=
FACEBOOK_ACCESS_TOKEN=

# --- Google Drive Dropzone (media-required publish) ---
# Đường dẫn file JSON Service Account (bắt buộc cho ingest + move file).
GDRIVE_SA_JSON_PATH=
# Folder ID trên Drive: READY (ảnh / video chờ ingest), PROCESSED (đã đăng), REJECTED (lỗi/invalid).
GDRIVE_READY_IMAGES_FOLDER_ID=
GDRIVE_READY_VIDEOS_FOLDER_ID=
GDRIVE_PROCESSED_FOLDER_ID=
GDRIVE_REJECTED_FOLDER_ID=
# Thư mục local lưu file tải từ Drive (mặc định /opt/aiplatform/media_cache).
LOCAL_MEDIA_DIR=/opt/aiplatform/media_cache
# Giới hạn size (MB): ảnh 10MB, video 200MB.
ASSET_MAX_IMAGE_MB=10
ASSET_MAX_VIDEO_MB=200

# --- AI Lead System (Facebook comment/inbox -> lead_signals -> follow-up) ---
# n8n webhook: gọi khi priority=high (timeout 3–5s, retry 1). Optional.
WEBHOOK_URL=
# Classify intent: true = gọi LLM khi rule không match (unknown); false = chỉ rule.
LEAD_CLASSIFY_USE_LLM=false
# Timeouts (seconds). Defaults: 6 (LLM), 5 (n8n).
LEAD_CLASSIFY_LLM_TIMEOUT_SECONDS=6
N8N_WEBHOOK_TIMEOUT_SECONDS=5

# --- Huong dan secrets ---
# - DATABASE_URL: chi chua password trong .env, khong push len repo.
# - OPENAI_API_KEY, FACEBOOK_ACCESS_TOKEN: tuyet doi khong commit.
# - Prod: dung secret manager (AWS Secrets Manager, Vault, ...) hoac env inject khi chay.
